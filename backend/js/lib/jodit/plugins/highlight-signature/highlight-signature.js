/*!
 * jodit-pro - PRO Version of Jodit Editor
 * Author: Chupurnov Valeriy <chupurnov@gmail.com>
 * Version: v4.2.22
 * Url: https://xdsoft.net/jodit/pro/
 * License(s): SEE LICENSE IN LICENSE.md
 */


"use strict";!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r=t();for(var i in r)("object"==typeof exports?exports:e)[i]=r[i]}}(self,(function(){return(self.webpackChunkjodit_pro=self.webpackChunkjodit_pro||[]).push([[726],{14833:function(e,t,r){r.r(t),r.d(t,{highlightSignature:function(){return c}});var i=r(31635),o=r(53557),n=r(23545),a=r(97099),s=r(67141),l=r(91288),h=r(25511);l.T.prototype.highlightSignature={schema:{},excludeTags:["pre"]};var c=function(e){function t(){var t=e.apply(this,(0,i.fX)([],(0,i.zs)(arguments),!1))||this;return t.idleId=0,t}return(0,i.C6)(t,e),t.prototype.afterInit=function(e){Object.keys(e.o.highlightSignature.schema).length&&e.e.on("change afterSetMode",this.walkNodes).on("afterGetValueFromEditor",t.removeUtilWrappers)},t.prototype.beforeDestruct=function(e){e.e.off("change afterSetMode",this.walkNodes).off("afterGetValueFromEditor",t.removeUtilWrappers)},t.prototype.walkNodes=function(){if(this.j.isEditorMode()){this.checkUtilsBoxToSchema();var e=this.j,t=e.ed.createNodeIterator(e.editor,NodeFilter.SHOW_TEXT);this.j.async.cancelIdleCallback(this.idleId),this.workLoop(t)}},t.prototype.runWorker=function(e,t){var r;this.j.e.mute();try{do{if(!(r=t.nextNode()))return;if(this.checkNormalizing(r))return;this.checkReplaceSchemas(r)}while(r&&e.timeRemaining()>0)}finally{this.j.e.unmute()}this.workLoop(t)},t.prototype.workLoop=function(e){var t=this;this.idleId=this.j.async.requestIdleCallback((function(r){t.runWorker(r,e)}),{timeout:this.j.defaultTimeout})},t.prototype.checkNormalizing=function(e){return!!n.J.isText(e.nextSibling)&&(this.j.editor.normalize(),this.walkNodes(),!0)},t.prototype.checkReplaceSchemas=function(e){if(!t.hasUtilWrapper(e)){var r=e.nodeValue;if(null!=r){var i=this.j.o.highlightSignature;for(var o in i.schema){var a=RegExp(o);if(a.test(r)){var s=r.match(a);if(!s||void 0===s.index)continue;var l=i.schema[o](this.j,s);if(l)return n.J.markTemporary(l,{dataHighlightSchema:o}),void this.replaceMatchedTextToElm(e,r,s,l)}}}}},t.prototype.replaceMatchedTextToElm=function(e,t,r,i){var o,a=this.j,s=a.s.range,l=s.startContainer===e,h=s.startOffset,c=null!==(o=r.index)&&void 0!==o?o:0;e.nodeValue=t.substring(0,c);var u=t.substring(c+r[0].length);if(u.length){var f=a.createInside.text(u);n.J.after(e,f)}i.innerText=r[0],n.J.after(e,i),l&&this.restoreCursorPosition(h,e,i.firstChild,i.nextSibling)},t.hasUtilWrapper=function(e){return n.J.isTemporary(e.parentElement)},t.removeUtilWrappers=function(e){e.value=n.J.replaceTemporaryFromString(e.value)},t.prototype.restoreCursorPosition=function(e){for(var t,r,o=[],n=1;arguments.length>n;n++)o[n-1]=arguments[n];try{for(var a=(0,i.Ju)(o),s=a.next();!s.done;s=a.next()){var l=s.value;if(l&&l.nodeValue){var h=l.nodeValue;if(h.length>=e){var c=this.j.s.createRange();c.setStart(l,e),this.j.s.selectRange(c,!1);break}e-=h.length}}}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}},t.prototype.checkUtilsBoxToSchema=function(){var e=this;n.J.temporaryList(this.j.editor).forEach((function(t){var r,i=(0,a.C)(t,"dataHighlightSchema");if(i){var o=RegExp(i),s=null!==(r=t.innerText)&&void 0!==r?r:"";o.test(s)&&!s.replace(o,"").length||(e.j.s.save(),n.J.unwrap(t),e.j.s.restore())}}))},t.requires=["license"],(0,i.Cg)([(0,o.debounce)()],t.prototype,"walkNodes",null),(0,i.Cg)([o.autobind],t.prototype,"runWorker",null),t}(s.k);h.A.plugins.add("highlight-signature",c)}},function(e){return e(e.s=14833)}])}));